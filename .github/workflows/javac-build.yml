# This is a basic workflow to help you get started with Actions

name: Javac Build Verification

# Controls when the action will run. Triggers the workflow on pull request events
on: pull_request

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - name: Checkout Repo Branch
        uses: actions/checkout@v2

      # Runs a single command using the runners shell
      - name: Install openjdk-11.0.8 (x64)
        uses: actions/setup-java@v1
        with:
          java-version: '11.0.8' # The JDK version to make available on the path.
          java-package: jdk # (jre, jdk, or jdk+fx) - defaults to jdk
          architecture: x64 # (x64 or x86) - defaults to x64
      - name: Install wget
        run: sudo apt install wget
      - name: Install junit-console-standalone-1.6.2
        run:
          wget https://search.maven.org/remotecontent?filepath=org/junit/platform/junit-platform-console-standalone/1.6.2/junit-platform-console-standalone-1.6.2.jar;
          mv 'remotecontent?filepath=org%2Fjunit%2Fplatform%2Fjunit-platform-console-standalone%2F1.6.2%2Fjunit-platform-console-standalone-1.6.2.jar' junit-platform-console-standalone-1.6.2.jar;
          unzip junit-platform-console-standalone-1.6.2.jar -d junit-platform-console-standalone-1.6.2
        # Note, we get the JAR file from getting the link from the public Maven website, then extract it.
      - name: Verify that all Java code compiles
        run: javac -d bin -sourcepath source -classpath junit-platform-console-standalone-1.6.2.jar $(find -name *.java)
        # Note this uses command substitution and the find command
        # from CSI 3660 Systems Admin I
